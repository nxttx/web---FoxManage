(this.webpackJsonpfoxmanage=this.webpackJsonpfoxmanage||[]).push([[0],{38:function(e,t,s){"use strict";s.r(t);var a=s(0),r=s(1),n=s.n(r),c=s(19),i=s.n(c),l=s(20),o=s(21),d=s(13),j=s(26),b=s(25),h=s(4),u=s.n(h),x=s(9),m=s(5);var p=function(e){var t=Object(r.useState)(""),s=Object(m.a)(t,2),n=s[0],c=s[1],i=Object(r.useState)(""),l=Object(m.a)(i,2),o=l[0],d=l[1],j=Object(r.useState)("button is-block is-primary is-fullwidth"),b=Object(m.a)(j,2),h=b[0],p=b[1],O=Object(r.useState)("Please enter your email and password."),f=Object(m.a)(O,2),v=f[0],g=f[1],w=Object(r.useState)("title has-text-grey is-5"),N=Object(m.a)(w,2),S=N[0],y=N[1],k=Object(r.useState)("input"),C=Object(m.a)(k,2),P=C[0],D=C[1];function T(){return(T=Object(x.a)(u.a.mark((function t(s){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.preventDefault(),!(o.length>=8)){t.next=18;break}return p("button is-block is-primary is-fullwidth is-loading"),t.prev=3,t.next=6,fetch(e.IP+"login.php",{method:"POST",mode:"cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"username="+n+"&password="+o});case 6:a=t.sent,console.log(a),200===a.status?(p("button is-block is-success is-fullwidth"),e.setCurrentScreen("index")):500===a.status?(g("There was an error."),p("button is-block is-primary is-fullwidth")):(g("Account not found or incorrect password."),y("title has-text-danger is-5"),p("button is-block is-danger is-fullwidth")),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0),g("There was an error."),p("button is-block is-primary is-fullwidth");case 16:t.next=21;break;case 18:g("Password must be longer than 7 characters."),y("title has-text-danger is-5"),D("input is-danger");case 21:case"end":return t.stop()}}),t,null,[[3,11]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){function t(){return(t=Object(x.a)(u.a.mark((function t(){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.IP+"CheckIfLoggedin.php",{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},redirect:"follow",referrerPolicy:"no-referrer"});case 2:200===(s=t.sent).status?e.setCurrentScreen("index"):s.status;case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e]),Object(a.jsx)("div",{className:"hero is-primary is-fullheight",children:Object(a.jsx)("div",{className:"hero-body",children:Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("div",{className:"columns",children:[Object(a.jsx)("div",{className:"column"}),Object(a.jsxs)("div",{className:"column is-4 has-text-centered",children:[Object(a.jsx)("h3",{className:"title has-text-white",children:"Login"}),Object(a.jsx)("hr",{className:"login-hr"}),Object(a.jsx)("p",{className:"subtitle has-text-white",children:"Login to your manager"}),Object(a.jsxs)("div",{className:"box",children:[Object(a.jsx)("div",{className:S,children:v}),Object(a.jsxs)("form",{onSubmit:function(e){return T.apply(this,arguments)},children:[Object(a.jsxs)("div",{className:"field",children:[Object(a.jsx)("label",{className:"label has-text-left",htmlFor:"username",children:"Username"}),Object(a.jsxs)("div",{className:"control has-icons-left",children:[Object(a.jsx)("input",{autoFocus:!0,className:"input",id:"username",placeholder:"Username",type:"text",value:n,onChange:function(e){c(e.target.value)}}),Object(a.jsx)("span",{className:"icon is-small is-left",children:Object(a.jsx)("i",{className:"fas fa-user"})})]})]}),Object(a.jsxs)("div",{className:"field",children:[Object(a.jsx)("label",{className:"label has-text-left",htmlFor:"password",children:"Password"}),Object(a.jsxs)("div",{className:"control has-icons-left",children:[Object(a.jsx)("input",{className:P,id:"password",placeholder:"Password",type:"password",value:o,onChange:function(e){d(e.target.value)}}),Object(a.jsx)("span",{className:"icon is-small is-left",children:Object(a.jsx)("i",{className:"fas fa-lock"})})]})]}),Object(a.jsx)("button",{id:"LoginButton",className:h,children:"Login"})]})]}),Object(a.jsxs)("p",{className:"has-text-grey",children:[Object(a.jsx)("a",{href:"/",children:"Sign Up"})," \xa0\xb7\xa0",Object(a.jsx)("a",{href:"/",children:"Forgot Password"})," \xa0\xb7\xa0",Object(a.jsx)("a",{href:"/",children:"Need Help?"})]})]}),Object(a.jsx)("div",{className:"column"})]})})})})},O=s(10),f=s(2);var v=function(e){function t(){return(t=Object(x.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.IP+"logout.php",{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},redirect:"follow",referrerPolicy:"no-referrer"});case 2:200===t.sent.status?e.setCurrentScreen("login"):alert("Something went wrong. Try again later.");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.jsxs)("nav",{className:"navbar has-background-light",role:"navigation","aria-label":"main navigation",children:[Object(a.jsxs)("div",{className:"navbar-brand",children:[Object(a.jsx)("a",{className:"navbar-item",href:"https://bulma.io",children:Object(a.jsx)("img",{src:"images/logo.png",width:112,height:28,alt:"logo"})}),Object(a.jsxs)("button",{className:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",children:[Object(a.jsx)("span",{"aria-hidden":"true"}),Object(a.jsx)("span",{"aria-hidden":"true"}),Object(a.jsx)("span",{"aria-hidden":"true"})]})]}),Object(a.jsxs)("div",{id:"navbarBasicExample",className:"navbar-menu",children:[Object(a.jsxs)("div",{className:"navbar-start",children:[Object(a.jsx)(O.b,{className:"navbar-item",to:"/",children:"Home"}),Object(a.jsx)("a",{className:"navbar-item",href:"https://mail.axc.nl/",target:"_blank",rel:"noreferrer",children:"Email"}),Object(a.jsxs)("div",{className:"navbar-item has-dropdown is-hoverable",children:[Object(a.jsx)("a",{href:"/",className:"navbar-link",children:"More"}),Object(a.jsxs)("div",{className:"navbar-dropdown",children:[Object(a.jsx)("a",{href:"/",className:"navbar-item",children:"About"}),Object(a.jsx)("a",{href:"/",className:"navbar-item",children:"Jobs"}),Object(a.jsx)("a",{href:"/",className:"navbar-item",children:"Contact"}),Object(a.jsx)("hr",{className:"navbar-divider"}),Object(a.jsx)("a",{href:"/",className:"navbar-item",children:"Report an issue"})]})]})]}),Object(a.jsx)("div",{className:"navbar-end",children:Object(a.jsx)("div",{className:"navbar-item",children:Object(a.jsx)("div",{className:"buttons",children:Object(a.jsx)("button",{className:"button is-primary",onClick:function(){return function(){return t.apply(this,arguments)}()},children:Object(a.jsx)("strong",{children:"Logout"})})})})})]})]})};var g=function(e){var t=Object(r.useState)("Loading..."),s=Object(m.a)(t,2),n=s[0],c=s[1],i=Object(r.useState)(""),l=Object(m.a)(i,2),o=l[0],d=l[1],j=Object(r.useState)(100),b=Object(m.a)(j,2),h=b[0],p=b[1],f=Object(r.useState)("progress is-primary"),v=Object(m.a)(f,2),g=v[0],w=v[1];return Object(r.useEffect)((function(){function t(){return(t=Object(x.a)(u.a.mark((function t(){var s,a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.IP+"getUsedData.php",{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},redirect:"follow",referrerPolicy:"no-referrer"});case 2:if(200!==(s=t.sent).status){t.next=14;break}return t.next=6,s.json();case 6:a=t.sent,c(a.usedDirSize+" / "+a.maxDirSize+" MB"),p(a.maxDirSize),d(a.usedDirSize),(r=a.usedDirSize/a.maxDirSize*100)>90?w("progress is-danger"):r>75&&w("progress is-warning"),t.next=15;break;case 14:401===s.status||(d(100),w("progress"),c("Request error."));case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.IP]),Object(a.jsxs)("aside",{className:"menu",children:[Object(a.jsx)("p",{className:"menu-label",children:"General"}),Object(a.jsxs)("ul",{className:"menu-list",children:[Object(a.jsx)("li",{children:Object(a.jsx)(O.b,{to:"/",children:"Dashboard"})}),Object(a.jsx)("li",{children:Object(a.jsx)(O.b,{to:"/Domains",children:"Domains"})}),Object(a.jsx)("li",{children:Object(a.jsx)(O.b,{to:"/Databases",children:"Databases"})})]}),Object(a.jsx)("p",{className:"menu-label",children:"Data"}),""!==o?Object(a.jsx)("progress",{id:"usedDataSlider",className:g,max:h,value:o}):Object(a.jsx)("progress",{id:"usedDataSlider",className:g,max:h}),Object(a.jsx)("p",{id:"usedDataText",children:n})]})};var w=function(e){return Object(a.jsx)("footer",{className:"footer has-background-light",children:Object(a.jsx)("div",{className:"content has-text-centered",children:Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"FoxManage"})," by ",Object(a.jsx)("a",{href:"https://robertboudewijn.nl",children:"Robert Boudewijn"}),". The source code is licensed",Object(a.jsx)("a",{href:"https://opensource.org/licenses/BSD-2-Clause",children:"BSD"}),". The website content is licensed ",Object(a.jsx)("a",{href:"http://creativecommons.org/licenses/by-nc-sa/4.0/",children:"CC BY NC SA 4.0"}),".",Object(a.jsx)("br",{}),"Copyright 2021 Robert Boudewijn"]})})})},N=s(23);var S=function(e){var t=Object(r.useState)(""),s=Object(m.a)(t,2),n=s[0],c=s[1],i=Object(r.useState)(Object(a.jsx)(a.Fragment,{})),l=Object(m.a)(i,2),o=l[0],d=l[1],j=Object(r.useState)(""),b=Object(m.a)(j,2),h=b[0],p=b[1],O=Object(r.useState)(""),f=Object(m.a)(O,2),v=f[0],g=f[1];function w(e){return"object"===typeof e?e.map((function(e){return Object(a.jsx)("li",{children:e},e)})):Object(a.jsx)("li",{children:"Geen gevonden"})}return Object(r.useEffect)((function(){function t(){return(t=Object(x.a)(u.a.mark((function t(){var s,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.IP+"getUsedData.php",{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},redirect:"follow",referrerPolicy:"no-referrer"});case 2:if(200!==(s=t.sent).status){t.next=8;break}return t.next=6,s.json();case 6:a=t.sent,c(a);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=Object(x.a)(u.a.mark((function t(){var s,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.IP+"getUserDomains.php",{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},redirect:"follow",referrerPolicy:"no-referrer"});case 2:if(200!==(s=t.sent).status){t.next=10;break}return t.next=6,s.json();case 6:a=t.sent,p(a),t.next=11;break;case 10:s.status;case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function a(){return(a=Object(x.a)(u.a.mark((function t(){var s,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.IP+"getUserDatabases.php",{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},redirect:"follow",referrerPolicy:"no-referrer"});case 2:if(200!==(s=t.sent).status){t.next=10;break}return t.next=6,s.json();case 6:a=t.sent,g(a),t.next=11;break;case 10:s.status;case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}(),function(){s.apply(this,arguments)}(),function(){a.apply(this,arguments)}()}),[e.IP]),Object(r.useEffect)((function(){""!==n&&d(Object(a.jsx)(N.a,{width:400,height:300,chartType:"PieChart",loader:Object(a.jsx)("div",{children:"Loading Chart"}),data:[["Type","amount"],["Database",n.usedDirSize-n.folderUsedDirSize],["storage",n.folderUsedDirSize],["free",n.maxDirSize-n.usedDirSize]],options:{title:"Storage",sliceVisibilityThreshold:1e-8},rootProps:{"data-testid":"1"}}))}),[n]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{className:"title",children:"Dashboard"}),Object(a.jsxs)("div",{className:"columns",children:[Object(a.jsxs)("div",{className:"column",children:[Object(a.jsx)("h2",{className:"subtitle",children:"Domains:"}),Object(a.jsx)("div",{className:"content",children:Object(a.jsx)("ul",{id:"domains",children:w(h)})}),Object(a.jsx)("h2",{className:"subtitle",children:"Databases:"}),Object(a.jsx)("div",{className:"content",children:Object(a.jsx)("ul",{id:"databases",children:w(v)})})]}),Object(a.jsx)("div",{className:"column is-5-desktop ",children:o})]})]})};var y=function(e){return Object(a.jsxs)(O.a,{children:[Object(a.jsx)(v,{IP:e.IP,setCurrentScreen:e.setCurrentScreen}),Object(a.jsx)("section",{children:Object(a.jsxs)("div",{className:"columns",children:[Object(a.jsx)("div",{className:"column is-2 has-background-light CS-has-padding-left-2 CS-has-padding-top-2 CS-has-padding-bottom-2",children:Object(a.jsx)(g,{IP:e.IP})}),Object(a.jsx)("div",{className:"column",children:Object(a.jsx)("div",{className:"container CS-has-padding-left-1",children:Object(a.jsxs)(f.c,{children:[Object(a.jsx)(f.a,{path:"/Domains",children:Object(a.jsx)("div",{children:"domains "})}),Object(a.jsx)(f.a,{path:"/Databases",children:Object(a.jsx)("div",{children:"databases"})}),Object(a.jsx)(f.a,{path:"/",children:Object(a.jsx)(S,{IP:e.IP})})]})})})]})}),Object(a.jsx)(w,{})]})},k=function(e){Object(j.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).state={IP:"http://localhost/a_routes/",currentScreen:"login"},a.setCurrentScreen=a.setCurrentScreen.bind(Object(d.a)(a)),a}return Object(o.a)(s,[{key:"setCurrentScreen",value:function(e){this.setState({currentScreen:e})}},{key:"render",value:function(){switch(this.state.currentScreen){case"login":return Object(a.jsx)(p,{IP:this.state.IP,setCurrentScreen:this.setCurrentScreen});case"index":return Object(a.jsx)(y,{IP:this.state.IP,setCurrentScreen:this.setCurrentScreen})}}}]),s}(n.a.Component);i.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(k,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.97e2473f.chunk.js.map